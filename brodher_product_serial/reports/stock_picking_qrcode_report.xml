<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Report Action -->
    <record id="action_report_stock_picking_qrcode" model="ir.actions.report">
        <field name="name">Stock Picking QR Code</field>
        <field name="model">stock.picking</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">brodher_product_serial.stock_picking_qrcode_report</field>
        <field name="report_file">brodher_product_serial.stock_picking_qrcode_report</field>
        <field name="binding_model_id" ref="stock.model_stock_picking"/>
        <field name="binding_type">report</field>
    </record>

    <!-- Report Template -->
    <template id="stock_picking_qrcode_report">
        <t t-call="web.basic_layout">
            <t t-foreach="docs" t-as="picking">
                <div style="display: flex; flex-wrap: wrap;">
                    <t t-foreach="picking.sn_move_ids" t-as="sn_move">
                        <t t-set="sn" t-value="sn_move.serial_number_id"/>
                        <div style="width: 33%; text-align: center; margin-bottom: 10px;">
                            <strong><t t-esc="sn.product_id.display_name if sn.product_id else sn.product_id.name"/></strong><br/>
                            <span><t t-esc="sn.name"/></span><br/>
                            <img t-att-src="'/report/barcode/QR/%s' % sn.name" style="width:100px;height:100px;"/>
                        </div>
                    </t>
                </div>
            </t>
        </t>
    </template>
</odoo>